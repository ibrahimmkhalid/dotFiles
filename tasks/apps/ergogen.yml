- name: "[apps: ergogen] Remove/prepare ergogen directories"
  file:
    path: '{{ item }}'
    state: absent
  with_items:
    - "{{ home }}/.local/share/ergogen"
    - "{{ home }}/.local/bin/ergogen"
  tags:
    - clean
- name: "[apps: ergogen] Clone ergogen repo"
  ansible.builtin.git:
    repo: 'https://github.com/ergogen/ergogen'
    dest: '{{ home }}/.local/share/ergogen'
- name: "[apps: ergogen] Initialize ergogen"
  shell: "cd {{ home }}/.local/share/ergogen && npm install"
  environment:
    N_PREFIX: "{{ home }}/.local/share/n"
    PATH: "{{ home }}/.local/share/n/bin:{{ ansible_env.PATH }}"
- name: "[apps: ergogen] Add ergogen cli to path"
  file:
    src: "{{ home }}/.local/share/ergogen/src/cli.js"
    dest: "{{ home }}/.local/bin/ergogen"
    state: link
    force: yes
